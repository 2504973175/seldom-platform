import{T as F}from"./team.2a466914.js";import{_ as U}from"./Input.b88c9ca8.js";import{d as w,r as k,af as A,o as C,bp as x,bt as a,bx as o,br as h,b2 as p,a7 as v,a as V,bR as b,bV as R,bW as j,bu as q,bv as z,j as E}from"./index.24059398.js";import{u as $,_ as M,b as L,d as P}from"./HttpCommon.d6b77f6d.js";import{N as T}from"./Space.591372fd.js";import{_ as W,a as G}from"./BreadcrumbItem.a9996296.js";import{_ as H}from"./DataTable.677d5b72.js";import{_ as J}from"./_plugin-vue_export-helper.3df3813b.js";import"./light.9d5e7374.js";import"./Tag.37583d94.js";import"./light.92a7a94d.js";import"./Select.8d42d711.js";import"./Icon.1e1350dc.js";const K={class:"team-form"},O={class:"dialog-footer"},Q=p("\u53D6\u6D88"),X=p("\u4FDD\u5B58"),Y=w({__name:"TeamForm",props:{teamId:Number},emits:["cancel"],setup(c,{emit:I}){const _=c,i=$(),m=k(null),n=k({id:0,name:"",email:""}),t={name:{required:!0,trigger:["input"],message:"\u8BF7\u8F93\u5165\u56E2\u961F\u540D\u79F0"},email:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u56E2\u961F\u90AE\u7BB1"}},f=async r=>{F.getTeamDetails(r.toString()).then(u=>{u.success===!0?n.value=u.result:i.error(u.error.message)})};A(()=>{_.teamId===0||f(_.teamId)});const D=()=>{var r;(r=m.value)==null||r.validate(u=>{if(u)return!1;if(_.teamId===0)F.createTeam(n.value).then(e=>{e.success===!0?i.success("\u521B\u5EFA\u6210\u529F\uFF01"):i.error("\u521B\u5EFA\u5931\u8D25\uFF01")});else{const e=_.teamId+"";F.updateTeam(e,n.value).then(s=>{s.success===!0?(i.success("\u66F4\u65B0\u6210\u529F\uFF01"),g()):i.error("\u66F4\u65B0\u5931\u8D25\uFF01")})}})},g=()=>{I("cancel",{})};return(r,u)=>{const e=U,s=M,d=v,B=T,y=L;return C(),x("div",K,[a(y,{ref_key:"formRef",ref:m,model:n.value,rules:t,"label-placement":"left","label-width":"auto"},{default:o(()=>[a(s,{label:"\u540D\u79F0",path:"name"},{default:o(()=>[a(e,{value:n.value.name,"onUpdate:value":u[0]||(u[0]=l=>n.value.name=l),placeholder:"\u56E2\u961F\u540D\u79F0",clearable:""},null,8,["value"])]),_:1}),a(s,{label:"\u90AE\u7BB1",path:"email"},{default:o(()=>[a(e,{value:n.value.email,"onUpdate:value":u[1]||(u[1]=l=>n.value.email=l),placeholder:"\u56E2\u961F\u90AE\u7BB1",clearable:""},null,8,["value"])]),_:1}),h("div",O,[a(B,null,{default:o(()=>[a(d,{onClick:u[2]||(u[2]=l=>g())},{default:o(()=>[Q]),_:1}),a(d,{type:"primary",onClick:u[3]||(u[3]=l=>D())},{default:o(()=>[X]),_:1})]),_:1})])]),_:1},8,["model"])])}}}),Z=c=>(q("data-v-378e3bed"),c=c(),z(),c),ee={class:"body"},te={class:"pageheader"},ae=Z(()=>h("span",null,"\u56E2\u961F\u7BA1\u7406",-1)),ue=p("\u9996\u9875"),oe=p("\u914D\u7F6E\u7BA1\u7406"),se=p("\u56E2\u961F\u7BA1\u7406"),ne={class:"filter-line"},le=p("\u521B\u5EFA"),ie=w({__name:"Team",setup(c){const _=(({teamList:e})=>[{title:"ID",key:"id"},{title:"\u56E2\u961F\u540D\u79F0",key:"name"},{title:"\u56E2\u961F\u90AE\u7BB1",key:"email"},{title:"\u66F4\u65B0\u65F6\u95F4",key:"update_time"},{title:"\u64CD\u4F5C",key:"actions",render(s){return E(T,{},{default:()=>[E(v,{type:"info",secondary:!0,size:"small",onClick:()=>e(s,"edit")},{default:()=>"\u7F16\u8F91"}),E(v,{type:"error",secondary:!0,size:"small",onClick:()=>e(s,"delete")},{default:()=>"\u5220\u9664"})]})}}])({teamList(e,s){switch(t.teamId=e.id,s){case"edit":t.modalType=0,g(e.id);break;case"delete":r(e.id);break}}}),i=!1,m=$(),n=P(),t=V({loading:!0,teamData:[],modalType:1,showDailog:!1,teamId:0}),f=async()=>{t.loading=!0;const e=await F.getTeamAll();e.success===!0?t.teamData=e.result:m.error(e.error.message),t.loading=!1},D=()=>{t.modalType=1,t.teamId=0,t.showDailog=!0},g=e=>{t.modalType=0,t.teamId=e,t.showDailog=!0},r=e=>{n.warning({title:"\u8B66\u544A",content:"\u4F60\u786E\u5B9A\u5220\u9664\u56E2\u961F\u5417\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{F.deleteTeam(e.toString()).then(s=>{s.success===!0?(m.success("\u5220\u9664\u6210\u529F\uFF01"),f()):m.error("\u5220\u9664\u5931\u8D25")})},onNegativeClick:()=>{console.log("\u53D6\u6D88\u5220\u9664")}})},u=()=>{t.showDailog=!1,f()};return A(()=>{f()}),(e,s)=>{const d=W,B=G,y=H,l=R,N=j;return C(),x("div",ee,[h("div",te,[a(b(T),{justify:"space-between",class:"breadcrumb-navigation"},{default:o(()=>[ae,a(B,{separator:">"},{default:o(()=>[a(d,null,{default:o(()=>[ue]),_:1}),a(d,null,{default:o(()=>[oe]),_:1}),a(d,null,{default:o(()=>[se]),_:1})]),_:1})]),_:1})]),a(l,{class:"main-card"},{default:o(()=>[h("div",ne,[a(b(v),{type:"primary",onClick:D},{default:o(()=>[le]),_:1})]),a(y,{columns:b(_),data:t.teamData,pagination:b(i),bordered:!1},null,8,["columns","data","pagination"])]),_:1}),a(N,{show:t.showDailog,"onUpdate:show":s[0]||(s[0]=S=>t.showDailog=S)},{default:o(()=>[a(l,{title:t.modalType?"\u65B0\u5EFA\u56E2\u961F":"\u7F16\u8F91\u56E2\u961F",style:{width:"600px"},role:"dialog"},{default:o(()=>[a(Y,{ref:"form",teamId:t.teamId,onCancel:u},null,8,["teamId"])]),_:1},8,["title"])]),_:1},8,["show"])])}}});const Be=J(ie,[["__scopeId","data-v-378e3bed"]]);export{Be as default};
